---
import ScreenBody from "@components/layouts/ScreenBody.astro";
import Input from "@components/UI/Input.astro";
import Title from "@components/UI/Title.astro";
import ScreenLayout from "@layouts/ScreenLayout.astro";
---

<ScreenLayout>
    <ScreenBody>
        <svg
            class="absolute left-4 top-8"
            width="65"
            height="36"
            viewBox="0 0 98 54"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M33.6875 51L30.625 54H67.375L64.3125 51L61.25 48H49L0 0L49 36L98 0L49 48H36.75L33.6875 51Z"
                fill="black"></path>
        </svg>
        <form class="h-full flex flex-col justify-center gap-4">
            <Title as="h1">Установите пин</Title>
            <p class="text-medium">
                Задайте PIN для быстрого входа и защиты данных
            </p>
            <div class="grid grid-cols-5 gap-4">
                <Input
                    isTextcenter
                    type="number"
                    variant="standard"
                    id="num_1"
                    name="num_1"
                />
                <Input
                    isTextcenter
                    type="number"
                    variant="standard"
                    id="num_2"
                    name="num_2"
                />
                <Input
                    isTextcenter
                    type="number"
                    variant="standard"
                    id="num_3"
                    name="num_3"
                />
                <Input
                    isTextcenter
                    type="number"
                    variant="standard"
                    id="num_4"
                    name="num_4"
                />
                <Input
                    isTextcenter
                    type="number"
                    variant="standard"
                    id="num_5"
                    name="num_5"
                />
            </div>
        </form>
    </ScreenBody>
</ScreenLayout>

<script>
    const nextUrl = "/main";

    const inputs = document.querySelectorAll('input[type="number"]');
    inputs.forEach((input, index) => {
        input.addEventListener("input", () => {
            if (input.value.length > 0 && index < inputs.length - 1) {
                inputs[index + 1].focus();
            }
            if (index === inputs.length - 1 && input.value.length > 0) {
                window.location.href = nextUrl;
            }
        });
    });
</script>
